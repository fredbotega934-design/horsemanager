<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VaaS Dashboard - Sistema de Haras</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .vaas-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .metric-card {
            transition: all 0.3s ease;
        }
        .metric-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .progress-bar {
            transition: width 0.5s ease;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <i data-lucide="stethoscope" class="w-8 h-8"></i>
                    <h1 class="text-2xl font-bold">VaaS Dashboard - Veterinarian as a Service</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-sm opacity-90" id="userInfo">Usu√°rio: Jo√£o Silva (Propriet√°rio)</span>
                    <a href="/" class="bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-2 rounded-lg transition-all">
                        <i data-lucide="arrow-left" class="w-4 h-4 inline mr-2"></i>
                        Voltar ao Dashboard
                    </a>
                </div>
            </div>
        </div>
    </header>

    <div class="container mx-auto px-6 py-8">
        <!-- Status da Assinatura -->
        <div class="vaas-card text-white rounded-xl shadow-lg p-6 mb-8">
            <div class="flex items-center justify-between">
                <div>
                    <h2 class="text-2xl font-bold mb-2">Plano VaaS Profissional</h2>
                    <p class="text-blue-100 mb-4">Plano completo para haras m√©dios com at√© 5 veterin√°rios</p>
                    <div class="flex items-center space-x-6">
                        <div>
                            <span class="text-3xl font-bold">R$ 599,00</span>
                            <span class="text-blue-100">/m√™s</span>
                        </div>
                        <div class="text-sm">
                            <div>‚úÖ Dashboard avan√ßado</div>
                            <div>‚úÖ Relat√≥rios detalhados</div>
                            <div>‚úÖ Analytics em tempo real</div>
                        </div>
                    </div>
                </div>
                <div class="text-right">
                    <div class="bg-white bg-opacity-20 rounded-lg p-4">
                        <div class="text-sm text-blue-100">Dias restantes</div>
                        <div class="text-2xl font-bold" id="diasRestantes">15</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- KPIs Principais -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="metric-card bg-white rounded-xl shadow-lg p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">Veterin√°rios Ativos</p>
                        <p class="text-3xl font-bold text-blue-600" id="veterinariosAtivos">2</p>
                        <p class="text-sm text-gray-400">de 5 dispon√≠veis</p>
                    </div>
                    <div class="bg-blue-100 p-3 rounded-full">
                        <i data-lucide="users" class="w-6 h-6 text-blue-600"></i>
                    </div>
                </div>
            </div>

            <div class="metric-card bg-white rounded-xl shadow-lg p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">Atendimentos (M√™s)</p>
                        <p class="text-3xl font-bold text-green-600" id="atendimentosMes">24</p>
                        <p class="text-sm text-green-500">+12% vs m√™s anterior</p>
                    </div>
                    <div class="bg-green-100 p-3 rounded-full">
                        <i data-lucide="activity" class="w-6 h-6 text-green-600"></i>
                    </div>
                </div>
            </div>

            <div class="metric-card bg-white rounded-xl shadow-lg p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">Receita (M√™s)</p>
                        <p class="text-3xl font-bold text-purple-600" id="receitaMes">R$ 6.200</p>
                        <p class="text-sm text-purple-500">+8% vs m√™s anterior</p>
                    </div>
                    <div class="bg-purple-100 p-3 rounded-full">
                        <i data-lucide="dollar-sign" class="w-6 h-6 text-purple-600"></i>
                    </div>
                </div>
            </div>

            <div class="metric-card bg-white rounded-xl shadow-lg p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">Economia Estimada</p>
                        <p class="text-3xl font-bold text-orange-600" id="economiaEstimada">R$ 9.800</p>
                        <p class="text-sm text-orange-500">vs contrata√ß√£o direta</p>
                    </div>
                    <div class="bg-orange-100 p-3 rounded-full">
                        <i data-lucide="trending-up" class="w-6 h-6 text-orange-600"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- Utiliza√ß√£o do Plano -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-6">
                    <i data-lucide="bar-chart" class="w-5 h-5 inline mr-2 text-blue-600"></i>
                    Utiliza√ß√£o do Plano
                </h3>
                
                <div class="space-y-6">
                    <div>
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm font-medium text-gray-700">Consultas</span>
                            <span class="text-sm text-gray-500" id="consultasUtilizacao">12 / 50</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="progress-bar bg-blue-600 h-2 rounded-full" style="width: 24%"></div>
                        </div>
                        <div class="text-xs text-gray-500 mt-1">24% utilizado</div>
                    </div>
                    
                    <div>
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm font-medium text-gray-700">Procedimentos</span>
                            <span class="text-sm text-gray-500" id="procedimentosUtilizacao">8 / 30</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="progress-bar bg-green-600 h-2 rounded-full" style="width: 27%"></div>
                        </div>
                        <div class="text-xs text-gray-500 mt-1">27% utilizado</div>
                    </div>
                    
                    <div>
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm font-medium text-gray-700">Veterin√°rios</span>
                            <span class="text-sm text-gray-500" id="veterinariosUtilizacao">2 / 5</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="progress-bar bg-purple-600 h-2 rounded-full" style="width: 40%"></div>
                        </div>
                        <div class="text-xs text-gray-500 mt-1">40% utilizado</div>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-lg p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-6">
                    <i data-lucide="calculator" class="w-5 h-5 inline mr-2 text-green-600"></i>
                    An√°lise de Custos
                </h3>
                
                <div class="space-y-4">
                    <div class="flex justify-between items-center p-3 bg-blue-50 rounded-lg">
                        <span class="text-sm font-medium text-gray-700">Plano VaaS Mensal</span>
                        <span class="text-lg font-bold text-blue-600">R$ 599,00</span>
                    </div>
                    
                    <div class="flex justify-between items-center p-3 bg-green-50 rounded-lg">
                        <span class="text-sm font-medium text-gray-700">Atendimentos Extras</span>
                        <span class="text-lg font-bold text-green-600" id="custosExtras">R$ 1.200,00</span>
                    </div>
                    
                    <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                        <span class="text-sm font-medium text-gray-700">Total VaaS</span>
                        <span class="text-lg font-bold text-gray-800" id="totalVaas">R$ 1.799,00</span>
                    </div>
                    
                    <div class="border-t pt-4">
                        <div class="flex justify-between items-center p-3 bg-red-50 rounded-lg">
                            <span class="text-sm font-medium text-gray-700">Contrata√ß√£o Direta</span>
                            <span class="text-lg font-bold text-red-600">R$ 16.000,00</span>
                        </div>
                        
                        <div class="flex justify-between items-center p-3 bg-green-100 rounded-lg mt-2">
                            <span class="text-sm font-medium text-gray-700">Economia Total</span>
                            <span class="text-xl font-bold text-green-700" id="economiaTotal">R$ 14.201,00</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gr√°ficos -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-6">
                    <i data-lucide="trending-up" class="w-5 h-5 inline mr-2 text-blue-600"></i>
                    Atendimentos por Dia (√öltimos 30 dias)
                </h3>
                <canvas id="atendimentosChart" width="400" height="200"></canvas>
            </div>

            <div class="bg-white rounded-xl shadow-lg p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-6">
                    <i data-lucide="pie-chart" class="w-5 h-5 inline mr-2 text-green-600"></i>
                    Tipos de Atendimento
                </h3>
                <canvas id="tiposChart" width="400" height="200"></canvas>
            </div>
        </div>

        <!-- Veterin√°rios Contratados -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <h3 class="text-xl font-bold text-gray-800 mb-6">
                <i data-lucide="users" class="w-5 h-5 inline mr-2 text-purple-600"></i>
                Veterin√°rios Contratados via VaaS
            </h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="border border-gray-200 rounded-lg p-4">
                    <div class="flex items-center space-x-4">
                        <div class="h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center">
                            <i data-lucide="stethoscope" class="w-6 h-6 text-blue-600"></i>
                        </div>
                        <div class="flex-1">
                            <h4 class="font-bold text-gray-800">Dr. Maria Santos</h4>
                            <p class="text-sm text-gray-500">CRMV: SP-12345 ‚Ä¢ Reprodu√ß√£o Equina</p>
                            <p class="text-xs text-gray-400">Contratada h√° 10 dias</p>
                        </div>
                        <div class="text-right">
                            <div class="text-sm font-medium text-green-600">Ativa</div>
                            <div class="text-xs text-gray-500">12 atendimentos</div>
                        </div>
                    </div>
                    
                    <div class="mt-4 grid grid-cols-3 gap-4 text-center">
                        <div>
                            <div class="text-lg font-bold text-blue-600">R$ 200</div>
                            <div class="text-xs text-gray-500">Consulta</div>
                        </div>
                        <div>
                            <div class="text-lg font-bold text-green-600">R$ 350</div>
                            <div class="text-xs text-gray-500">Procedimento</div>
                        </div>
                        <div>
                            <div class="text-lg font-bold text-purple-600">R$ 150</div>
                            <div class="text-xs text-gray-500">Hora</div>
                        </div>
                    </div>
                </div>

                <div class="border border-gray-200 rounded-lg p-4">
                    <div class="flex items-center space-x-4">
                        <div class="h-12 w-12 rounded-full bg-green-100 flex items-center justify-center">
                            <i data-lucide="stethoscope" class="w-6 h-6 text-green-600"></i>
                        </div>
                        <div class="flex-1">
                            <h4 class="font-bold text-gray-800">Dr. Carlos Oliveira</h4>
                            <p class="text-sm text-gray-500">CRMV: SP-67890 ‚Ä¢ Cl√≠nica Geral</p>
                            <p class="text-xs text-gray-400">Contratado h√° 10 dias</p>
                        </div>
                        <div class="text-right">
                            <div class="text-sm font-medium text-green-600">Ativo</div>
                            <div class="text-xs text-gray-500">12 atendimentos</div>
                        </div>
                    </div>
                    
                    <div class="mt-4 grid grid-cols-3 gap-4 text-center">
                        <div>
                            <div class="text-lg font-bold text-blue-600">R$ 200</div>
                            <div class="text-xs text-gray-500">Consulta</div>
                        </div>
                        <div>
                            <div class="text-lg font-bold text-green-600">R$ 350</div>
                            <div class="text-xs text-gray-500">Procedimento</div>
                        </div>
                        <div>
                            <div class="text-lg font-bold text-purple-600">R$ 150</div>
                            <div class="text-xs text-gray-500">Hora</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- A√ß√µes R√°pidas -->
        <div class="bg-white rounded-xl shadow-lg p-6">
            <h3 class="text-xl font-bold text-gray-800 mb-6">
                <i data-lucide="zap" class="w-5 h-5 inline mr-2 text-yellow-600"></i>
                A√ß√µes R√°pidas
            </h3>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <button class="flex items-center justify-center space-x-2 bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors">
                    <i data-lucide="user-plus" class="w-5 h-5"></i>
                    <span>Contratar Veterin√°rio</span>
                </button>
                
                <button class="flex items-center justify-center space-x-2 bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 transition-colors">
                    <i data-lucide="calendar-plus" class="w-5 h-5"></i>
                    <span>Agendar Atendimento</span>
                </button>
                
                <button class="flex items-center justify-center space-x-2 bg-purple-600 text-white py-3 px-4 rounded-lg hover:bg-purple-700 transition-colors">
                    <i data-lucide="file-text" class="w-5 h-5"></i>
                    <span>Relat√≥rio Mensal</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        // Inicializar √≠cones
        lucide.createIcons();

        // Configura√ß√£o da API
        const API_BASE_URL = '/api';
        let authToken = localStorage.getItem('authToken');

        // Dados simulados para demonstra√ß√£o
        const dadosSimulados = {
            atendimentosPorDia: [3, 2, 4, 1, 3, 5, 2, 4, 3, 2, 4, 1, 3, 5, 2, 4, 3, 2, 4, 1, 3, 5, 2, 4, 3, 2, 4, 1, 3, 5],
            tiposAtendimento: {
                consultas: 12,
                procedimentos: 8,
                emergencias: 4
            }
        };

        // Criar gr√°fico de atendimentos por dia
        function criarGraficoAtendimentos() {
            const ctx = document.getElementById('atendimentosChart').getContext('2d');
            
            // Gerar labels dos √∫ltimos 30 dias
            const labels = [];
            for (let i = 29; i >= 0; i--) {
                const data = new Date();
                data.setDate(data.getDate() - i);
                labels.push(data.getDate() + '/' + (data.getMonth() + 1));
            }
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Atendimentos',
                        data: dadosSimulados.atendimentosPorDia,
                        borderColor: '#3B82F6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                stepSize: 1
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        // Criar gr√°fico de tipos de atendimento
        function criarGraficoTipos() {
            const ctx = document.getElementById('tiposChart').getContext('2d');
            
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Consultas', 'Procedimentos', 'Emerg√™ncias'],
                    datasets: [{
                        data: [
                            dadosSimulados.tiposAtendimento.consultas,
                            dadosSimulados.tiposAtendimento.procedimentos,
                            dadosSimulados.tiposAtendimento.emergencias
                        ],
                        backgroundColor: [
                            '#3B82F6',
                            '#10B981',
                            '#F59E0B'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        // Carregar dados do dashboard VaaS
        async function carregarDashboardVaas() {
            try {
                // Simular carregamento de dados
                console.log('Carregando dados VaaS...');
                
                // Atualizar m√©tricas na interface
                document.getElementById('veterinariosAtivos').textContent = '2';
                document.getElementById('atendimentosMes').textContent = '24';
                document.getElementById('receitaMes').textContent = 'R$ 6.200';
                document.getElementById('economiaEstimada').textContent = 'R$ 9.800';
                
                // Atualizar utiliza√ß√£o
                document.getElementById('consultasUtilizacao').textContent = '12 / 50';
                document.getElementById('procedimentosUtilizacao').textContent = '8 / 30';
                document.getElementById('veterinariosUtilizacao').textContent = '2 / 5';
                
                // Atualizar custos
                document.getElementById('custosExtras').textContent = 'R$ 1.200,00';
                document.getElementById('totalVaas').textContent = 'R$ 1.799,00';
                document.getElementById('economiaTotal').textContent = 'R$ 14.201,00';
                
                // Criar gr√°ficos
                criarGraficoAtendimentos();
                criarGraficoTipos();
                
            } catch (error) {
                console.error('Erro ao carregar dados VaaS:', error);
            }
        }

        // Inicializar dashboard
        document.addEventListener('DOMContentLoaded', function() {
            carregarDashboardVaas();
        });

        // Adicionar interatividade aos bot√µes
        document.querySelectorAll('button').forEach(button => {
            button.addEventListener('click', function() {
                const texto = this.textContent.trim();
                
                if (texto.includes('Contratar Veterin√°rio')) {
                    alert('üîç Funcionalidade: Buscar e contratar veterin√°rios especializados na plataforma VaaS');
                } else if (texto.includes('Agendar Atendimento')) {
                    alert('üìÖ Funcionalidade: Agendar atendimento com veterin√°rios contratados');
                } else if (texto.includes('Relat√≥rio Mensal')) {
                    alert('üìä Funcionalidade: Gerar relat√≥rio detalhado de custos e atendimentos VaaS');
                }
            });
        });
    </script>
</body>
</html>
