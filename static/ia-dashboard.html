<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IA Dashboard - Sistema de Haras</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%);
        }
        .ai-card {
            background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%);
        }
        .prediction-card {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        .prediction-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .prediction-card.alta { border-left-color: #10B981; }
        .prediction-card.media { border-left-color: #F59E0B; }
        .prediction-card.baixa { border-left-color: #EF4444; }
        
        .insight-card {
            transition: all 0.3s ease;
        }
        .insight-card:hover {
            transform: scale(1.02);
        }
        
        .ai-metric {
            background: linear-gradient(135deg, #667EEA 0%, #764BA2 100%);
        }
        
        .loading-spinner {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <i data-lucide="brain" class="w-8 h-8"></i>
                    <h1 class="text-2xl font-bold">IA Dashboard - Intelig√™ncia Artificial</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-sm opacity-90" id="userInfo">Usu√°rio: Jo√£o Silva (Propriet√°rio)</span>
                    <a href="/" class="bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-2 rounded-lg transition-all">
                        <i data-lucide="arrow-left" class="w-4 h-4 inline mr-2"></i>
                        Voltar ao Dashboard
                    </a>
                </div>
            </div>
        </div>
    </header>

    <div class="container mx-auto px-6 py-8">
        <!-- Resumo de IA -->
        <div class="ai-card text-white rounded-xl shadow-lg p-6 mb-8">
            <div class="flex items-center justify-between">
                <div>
                    <h2 class="text-2xl font-bold mb-2">Intelig√™ncia Artificial Ativa</h2>
                    <p class="text-purple-100 mb-4">Sistema de ML processando dados em tempo real</p>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                        <div>
                            <div class="text-3xl font-bold" id="modelosAtivos">4</div>
                            <div class="text-purple-100">Modelos Ativos</div>
                        </div>
                        <div>
                            <div class="text-3xl font-bold" id="previsoesGeradas">156</div>
                            <div class="text-purple-100">Previs√µes/M√™s</div>
                        </div>
                        <div>
                            <div class="text-3xl font-bold" id="acuraciaMedia">87.3%</div>
                            <div class="text-purple-100">Acur√°cia M√©dia</div>
                        </div>
                        <div>
                            <div class="text-3xl font-bold" id="economiaGerada">R$ 15.420</div>
                            <div class="text-purple-100">Economia Gerada</div>
                        </div>
                    </div>
                </div>
                <div class="text-right">
                    <div class="bg-white bg-opacity-20 rounded-lg p-4">
                        <div class="text-sm text-purple-100">Status do Sistema</div>
                        <div class="text-2xl font-bold flex items-center">
                            <div class="w-3 h-3 bg-green-400 rounded-full mr-2 pulse-animation"></div>
                            Online
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Previs√µes Principais -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div class="prediction-card alta bg-white rounded-xl shadow-lg p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-bold text-gray-800">Taxa de Prenhez</h3>
                    <div class="bg-green-100 p-2 rounded-full">
                        <i data-lucide="trending-up" class="w-5 h-5 text-green-600"></i>
                    </div>
                </div>
                <div class="text-3xl font-bold text-green-600 mb-2" id="taxaPrenhez">84.2%</div>
                <div class="text-sm text-gray-500 mb-3">Previs√£o para novembro</div>
                <div class="flex items-center justify-between">
                    <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">Confian√ßa: 89%</span>
                    <span class="text-xs text-green-600 font-medium">‚Üó +2.8%</span>
                </div>
            </div>

            <div class="prediction-card media bg-white rounded-xl shadow-lg p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-bold text-gray-800">Receita Mensal</h3>
                    <div class="bg-blue-100 p-2 rounded-full">
                        <i data-lucide="dollar-sign" class="w-5 h-5 text-blue-600"></i>
                    </div>
                </div>
                <div class="text-3xl font-bold text-blue-600 mb-2" id="receitaPrevista">R$ 48.750</div>
                <div class="text-sm text-gray-500 mb-3">Previs√£o para novembro</div>
                <div class="flex items-center justify-between">
                    <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full">Confian√ßa: 85%</span>
                    <span class="text-xs text-blue-600 font-medium">‚Üó +8.5%</span>
                </div>
            </div>

            <div class="prediction-card alta bg-white rounded-xl shadow-lg p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-bold text-gray-800">Demanda VaaS</h3>
                    <div class="bg-purple-100 p-2 rounded-full">
                        <i data-lucide="activity" class="w-5 h-5 text-purple-600"></i>
                    </div>
                </div>
                <div class="text-3xl font-bold text-purple-600 mb-2" id="demandaVaas">28</div>
                <div class="text-sm text-gray-500 mb-3">Atendimentos previstos</div>
                <div class="flex items-center justify-between">
                    <span class="text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full">Confian√ßa: 92%</span>
                    <span class="text-xs text-purple-600 font-medium">‚Üó +12.3%</span>
                </div>
            </div>
        </div>

        <!-- Recomenda√ß√µes de Acasalamento -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <h3 class="text-xl font-bold text-gray-800 mb-6">
                <i data-lucide="heart" class="w-5 h-5 inline mr-2 text-red-600"></i>
                Recomenda√ß√µes de Acasalamento IA
            </h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                    <div class="flex items-center justify-between mb-3">
                        <h4 class="font-bold text-gray-800">Estrela Dourada √ó Trov√£o Negro</h4>
                        <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium">Score: 0.94</span>
                    </div>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Prob. Prenhez:</span>
                            <span class="font-medium text-green-600">88.5%</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Qualidade Prole:</span>
                            <span class="font-medium">9.3/10</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Compatibilidade:</span>
                            <span class="font-medium text-green-600">Excelente</span>
                        </div>
                    </div>
                    <div class="mt-3 p-2 bg-green-50 rounded text-xs text-green-700">
                        <strong>IA Recomenda:</strong> Acasalamento priorit√°rio. Alta compatibilidade gen√©tica detectada.
                    </div>
                </div>

                <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                    <div class="flex items-center justify-between mb-3">
                        <h4 class="font-bold text-gray-800">Lua Prateada √ó Vento Forte</h4>
                        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium">Score: 0.87</span>
                    </div>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Prob. Prenhez:</span>
                            <span class="font-medium text-blue-600">82.3%</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Qualidade Prole:</span>
                            <span class="font-medium">8.9/10</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Compatibilidade:</span>
                            <span class="font-medium text-blue-600">Boa</span>
                        </div>
                    </div>
                    <div class="mt-3 p-2 bg-blue-50 rounded text-xs text-blue-700">
                        <strong>IA Recomenda:</strong> H√≠brido vigor esperado. Linhagens complementares.
                    </div>
                </div>

                <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                    <div class="flex items-center justify-between mb-3">
                        <h4 class="font-bold text-gray-800">Brisa Matinal √ó Trov√£o Negro</h4>
                        <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-medium">Score: 0.79</span>
                    </div>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Prob. Prenhez:</span>
                            <span class="font-medium text-yellow-600">76.8%</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Qualidade Prole:</span>
                            <span class="font-medium">8.7/10</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Compatibilidade:</span>
                            <span class="font-medium text-yellow-600">Moderada</span>
                        </div>
                    </div>
                    <div class="mt-3 p-2 bg-yellow-50 rounded text-xs text-yellow-700">
                        <strong>IA Recomenda:</strong> Monitoramento intensivo devido √† idade da √©gua.
                    </div>
                </div>
            </div>
        </div>

        <!-- Alertas Inteligentes -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <h3 class="text-xl font-bold text-gray-800 mb-6">
                <i data-lucide="alert-triangle" class="w-5 h-5 inline mr-2 text-orange-600"></i>
                Alertas Inteligentes
            </h3>
            
            <div class="space-y-4">
                <div class="flex items-start space-x-4 p-4 bg-green-50 border-l-4 border-green-500 rounded-lg">
                    <div class="bg-green-100 p-2 rounded-full">
                        <i data-lucide="trending-up" class="w-5 h-5 text-green-600"></i>
                    </div>
                    <div class="flex-1">
                        <h4 class="font-bold text-green-800">Pico Reprodutivo Detectado</h4>
                        <p class="text-green-700 text-sm mt-1">Condi√ß√µes ideais para transfer√™ncia de embri√µes nos pr√≥ximos 15 dias</p>
                        <button class="mt-2 bg-green-600 text-white px-3 py-1 rounded text-xs hover:bg-green-700 transition-colors">
                            Agendar Transfer√™ncias
                        </button>
                    </div>
                    <span class="bg-green-200 text-green-800 px-2 py-1 rounded-full text-xs font-medium">Alta</span>
                </div>

                <div class="flex items-start space-x-4 p-4 bg-blue-50 border-l-4 border-blue-500 rounded-lg">
                    <div class="bg-blue-100 p-2 rounded-full">
                        <i data-lucide="dollar-sign" class="w-5 h-5 text-blue-600"></i>
                    </div>
                    <div class="flex-1">
                        <h4 class="font-bold text-blue-800">Economia em Alimenta√ß√£o</h4>
                        <p class="text-blue-700 text-sm mt-1">Plano otimizado pode reduzir custos em 18% mantendo qualidade nutricional</p>
                        <button class="mt-2 bg-blue-600 text-white px-3 py-1 rounded text-xs hover:bg-blue-700 transition-colors">
                            Ver Plano Otimizado
                        </button>
                    </div>
                    <span class="bg-blue-200 text-blue-800 px-2 py-1 rounded-full text-xs font-medium">M√©dia</span>
                </div>

                <div class="flex items-start space-x-4 p-4 bg-purple-50 border-l-4 border-purple-500 rounded-lg">
                    <div class="bg-purple-100 p-2 rounded-full">
                        <i data-lucide="activity" class="w-5 h-5 text-purple-600"></i>
                    </div>
                    <div class="flex-1">
                        <h4 class="font-bold text-purple-800">Crescimento de Receita</h4>
                        <p class="text-purple-700 text-sm mt-1">Tend√™ncia de crescimento de 8.5% na receita mensal detectada</p>
                        <button class="mt-2 bg-purple-600 text-white px-3 py-1 rounded text-xs hover:bg-purple-700 transition-colors">
                            Analisar Oportunidades
                        </button>
                    </div>
                    <span class="bg-purple-200 text-purple-800 px-2 py-1 rounded-full text-xs font-medium">Baixa</span>
                </div>
            </div>
        </div>

        <!-- Otimiza√ß√£o de Alimenta√ß√£o -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-6">
                    <i data-lucide="leaf" class="w-5 h-5 inline mr-2 text-green-600"></i>
                    Otimiza√ß√£o de Alimenta√ß√£o IA
                </h3>
                
                <div class="space-y-4">
                    <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
                        <div>
                            <div class="font-medium text-gray-800">Custo Atual</div>
                            <div class="text-sm text-gray-500">Plano tradicional</div>
                        </div>
                        <div class="text-right">
                            <div class="font-bold text-red-600">R$ 8.450</div>
                            <div class="text-xs text-red-500">/m√™s</div>
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg">
                        <div>
                            <div class="font-medium text-gray-800">Custo Otimizado</div>
                            <div class="text-sm text-gray-500">Plano IA</div>
                        </div>
                        <div class="text-right">
                            <div class="font-bold text-green-600">R$ 6.930</div>
                            <div class="text-xs text-green-500">/m√™s</div>
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-between p-3 bg-purple-50 rounded-lg">
                        <div>
                            <div class="font-medium text-gray-800">Economia Mensal</div>
                            <div class="text-sm text-gray-500">18% de redu√ß√£o</div>
                        </div>
                        <div class="text-right">
                            <div class="font-bold text-purple-600">R$ 1.520</div>
                            <div class="text-xs text-purple-500">economizados</div>
                        </div>
                    </div>
                </div>
                
                <button class="w-full mt-4 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors">
                    Aplicar Plano Otimizado
                </button>
            </div>

            <div class="bg-white rounded-xl shadow-lg p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-6">
                    <i data-lucide="bar-chart" class="w-5 h-5 inline mr-2 text-blue-600"></i>
                    Performance dos Modelos IA
                </h3>
                <canvas id="performanceChart" width="400" height="200"></canvas>
            </div>
        </div>

        <!-- Recomenda√ß√µes Estrat√©gicas -->
        <div class="bg-white rounded-xl shadow-lg p-6">
            <h3 class="text-xl font-bold text-gray-800 mb-6">
                <i data-lucide="lightbulb" class="w-5 h-5 inline mr-2 text-yellow-600"></i>
                Recomenda√ß√µes Estrat√©gicas IA
            </h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="space-y-4">
                    <div class="insight-card p-4 border border-gray-200 rounded-lg hover:shadow-md transition-all">
                        <div class="flex items-start space-x-3">
                            <div class="bg-green-100 p-2 rounded-full">
                                <i data-lucide="dna" class="w-4 h-4 text-green-600"></i>
                            </div>
                            <div>
                                <h4 class="font-medium text-gray-800">Gen√©tica</h4>
                                <p class="text-sm text-gray-600 mt-1">Focar em acasalamentos de alta compatibilidade gen√©tica para maximizar taxa de prenhez</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="insight-card p-4 border border-gray-200 rounded-lg hover:shadow-md transition-all">
                        <div class="flex items-start space-x-3">
                            <div class="bg-blue-100 p-2 rounded-full">
                                <i data-lucide="leaf" class="w-4 h-4 text-blue-600"></i>
                            </div>
                            <div>
                                <h4 class="font-medium text-gray-800">Nutri√ß√£o</h4>
                                <p class="text-sm text-gray-600 mt-1">Implementar plano alimentar otimizado para reduzir custos operacionais em 18%</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="space-y-4">
                    <div class="insight-card p-4 border border-gray-200 rounded-lg hover:shadow-md transition-all">
                        <div class="flex items-start space-x-3">
                            <div class="bg-purple-100 p-2 rounded-full">
                                <i data-lucide="users" class="w-4 h-4 text-purple-600"></i>
                            </div>
                            <div>
                                <h4 class="font-medium text-gray-800">VaaS</h4>
                                <p class="text-sm text-gray-600 mt-1">Expandir servi√ßos VaaS devido ao crescimento de 12.3% na demanda prevista</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="insight-card p-4 border border-gray-200 rounded-lg hover:shadow-md transition-all">
                        <div class="flex items-start space-x-3">
                            <div class="bg-orange-100 p-2 rounded-full">
                                <i data-lucide="thermometer" class="w-4 h-4 text-orange-600"></i>
                            </div>
                            <div>
                                <h4 class="font-medium text-gray-800">Ambiente</h4>
                                <p class="text-sm text-gray-600 mt-1">Monitorar condi√ß√µes ambientais para otimizar per√≠odo reprodutivo</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Inicializar √≠cones
        lucide.createIcons();

        // Configura√ß√£o da API
        const API_BASE_URL = '/api';
        let authToken = localStorage.getItem('authToken');

        // Criar gr√°fico de performance dos modelos
        function criarGraficoPerformance() {
            const ctx = document.getElementById('performanceChart').getContext('2d');
            
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Taxa Prenhez', 'Receita', 'Demanda VaaS', 'Alimenta√ß√£o', 'Acasalamento'],
                    datasets: [{
                        label: 'Acur√°cia (%)',
                        data: [89, 85, 92, 87, 91],
                        backgroundColor: 'rgba(139, 92, 246, 0.2)',
                        borderColor: 'rgba(139, 92, 246, 1)',
                        borderWidth: 2,
                        pointBackgroundColor: 'rgba(139, 92, 246, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(139, 92, 246, 1)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                stepSize: 20
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top'
                        }
                    }
                }
            });
        }

        // Carregar dados do dashboard de IA
        async function carregarDashboardIA() {
            try {
                console.log('Carregando dados de IA...');
                
                // Simular carregamento de dados
                setTimeout(() => {
                    // Criar gr√°fico de performance
                    criarGraficoPerformance();
                    
                    // Adicionar anima√ß√µes aos cards
                    document.querySelectorAll('.prediction-card').forEach((card, index) => {
                        setTimeout(() => {
                            card.style.opacity = '0';
                            card.style.transform = 'translateY(20px)';
                            card.style.transition = 'all 0.5s ease';
                            
                            setTimeout(() => {
                                card.style.opacity = '1';
                                card.style.transform = 'translateY(0)';
                            }, 100);
                        }, index * 200);
                    });
                    
                    console.log('Dashboard de IA carregado com sucesso!');
                }, 1000);
                
            } catch (error) {
                console.error('Erro ao carregar dados de IA:', error);
            }
        }

        // Simular atualiza√ß√µes em tempo real
        function simularAtualizacoesTempoReal() {
            setInterval(() => {
                // Atualizar m√©tricas com pequenas varia√ß√µes
                const taxaAtual = parseFloat(document.getElementById('taxaPrenhez').textContent);
                const novaTaxa = taxaAtual + (Math.random() - 0.5) * 0.5;
                document.getElementById('taxaPrenhez').textContent = novaTaxa.toFixed(1) + '%';
                
                const receitaAtual = parseFloat(document.getElementById('receitaPrevista').textContent.replace('R$ ', '').replace('.', ''));
                const novaReceita = receitaAtual + (Math.random() - 0.5) * 500;
                document.getElementById('receitaPrevista').textContent = 'R$ ' + novaReceita.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, '.');
                
            }, 5000); // Atualizar a cada 5 segundos
        }

        // Inicializar dashboard
        document.addEventListener('DOMContentLoaded', function() {
            carregarDashboardIA();
            simularAtualizacoesTempoReal();
        });

        // Adicionar interatividade aos bot√µes
        document.querySelectorAll('button').forEach(button => {
            button.addEventListener('click', function() {
                const texto = this.textContent.trim();
                
                if (texto.includes('Agendar Transfer√™ncias')) {
                    alert('ü§ñ IA Detectou: Condi√ß√µes ideais para transfer√™ncia de embri√µes!\n\nüìÖ Per√≠odo recomendado: 5-20 de novembro\nüå°Ô∏è Temperatura: 26-28¬∞C\nüíß Umidade: 65-70%\nüìà Taxa de sucesso prevista: 88.5%');
                } else if (texto.includes('Ver Plano Otimizado')) {
                    alert('üçÉ Plano Alimentar Otimizado por IA:\n\nüí∞ Economia: R$ 1.520/m√™s (18%)\nü•ï Feno Premium: 15% redu√ß√£o\nüåæ Concentrado: Otimiza√ß√£o por animal\nüíä Suplementos: Dosagem personalizada\nüìä Manuten√ß√£o da qualidade nutricional');
                } else if (texto.includes('Analisar Oportunidades')) {
                    alert('üìà An√°lise de Oportunidades IA:\n\nüéØ Crescimento previsto: +8.5%\nüêé Demanda por servi√ßos reprodutivos: +12%\nüíº Expans√£o VaaS recomendada\nüèÜ Novos mercados identificados\nüìä ROI projetado: 47.3%');
                } else if (texto.includes('Aplicar Plano Otimizado')) {
                    alert('‚úÖ Plano Alimentar IA Aplicado!\n\nü§ñ Sistema configurado automaticamente\nüì± Notifica√ß√µes ativadas\nüìä Monitoramento em tempo real\nüí∞ Economia estimada: R$ 1.520/m√™s\nüîÑ Ajustes autom√°ticos habilitados');
                }
            });
        });
    </script>
</body>
</html>
